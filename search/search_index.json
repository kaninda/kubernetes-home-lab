{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"network-topology/","title":"Network Topology","text":"<p>This section describes the physical and logical network topology of the Kubernetes Home Lab.</p> <p>The goal is to clearly understand: - how nodes are connected at the network level - how Kubernetes components communicate - how Pod networking is handled</p>"},{"location":"network-topology/#high-level-overview","title":"High-level overview","text":"<p>The cluster is deployed on a home LAN with: - a router providing DHCP reservations - a dedicated 2.5 GbE switch - all Kubernetes nodes connected via Ethernet</p> <p>All nodes use static IPs or DHCP reservations to ensure predictable addressing.</p>"},{"location":"network-topology/#physical-network-topology","title":"Physical network topology","text":"<p>```mermaid flowchart TB     subgraph LAN[\"Home LAN (192.168.1.0/24)\"]         R[\"RouterDHCP reservations\"]         S[\"2.5 GbE Switch\"]         R --&gt; S     end</p> <pre><code>subgraph K8S[\"Kubernetes Cluster\"]\n    CP[\"cp-1&lt;br/&gt;Control Plane&lt;br/&gt;192.168.1.53\"]\n    W1[\"worker-1&lt;br/&gt;Worker Node&lt;br/&gt;192.168.1.55\"]\n    W2[\"worker-2&lt;br/&gt;Worker Node&lt;br/&gt;192.168.1.56\"]\nend\n\nS --&gt; CP\nS --&gt; W1\nS --&gt; W2\n</code></pre>"},{"location":"network-topology/#_1","title":"```","text":""},{"location":"network-topology/#kubernetes-control-plane-communication","title":"Kubernetes control plane communication","text":"<ul> <li>The kube-apiserver runs on the control plane node</li> <li>Worker nodes communicate exclusively with the API server</li> <li>All control traffic uses the LAN network</li> </ul>"},{"location":"network-topology/#pod-network-calico","title":"Pod network (Calico)","text":"<p>The cluster uses Calico as the CNI. - Each node is assigned a Pod CIDR - Pods communicate directly across nodes - Pod traffic is encapsulated and routed by Calico - The Pod CIDR does not overlap with the LAN network</p> <p>```mermaid flowchart TB     subgraph Node1[\"worker-1\"]         P1[\"Pod\"]         P2[\"Pod\"]     end</p> <pre><code>subgraph Node2[\"worker-2\"]\n    P3[\"Pod\"]\nend\n\nP1 &lt;--&gt;|Calico| P3\nP2 &lt;--&gt;|Calico| P3\n</code></pre> <p>```</p>"},{"location":"network-topology/#network-ranges","title":"Network ranges","text":""},{"location":"os-preparation/","title":"OS Preparation (Ubuntu Server)","text":"<p>This section describes all system-level prerequisites required before installing Kubernetes using kubeadm.</p> <p>The goal is to ensure:</p> <ul> <li>system stability</li> <li>Kubernetes compatibility</li> <li>predictable and reproducible behavior across all nodes</li> </ul> <p>All steps below must be applied on every node:</p> <ul> <li>control plane</li> <li>worker nodes</li> </ul>"},{"location":"os-preparation/#base-assumptions","title":"Base assumptions","text":"<ul> <li>OS: Ubuntu Server 22.04 LTS (or newer)</li> <li>Architecture: amd64</li> <li>Network: static IP or DHCP reservation</li> <li>User has sudo privileges</li> </ul>"},{"location":"os-preparation/#disable-swap","title":"Disable swap","text":"<p>Kubernetes requires swap to be disabled. The kubelet will refuse to start if swap is enabled.</p>"},{"location":"os-preparation/#disable-swap-immediately","title":"Disable swap immediately","text":"<pre><code>sudo swapoff -a\n</code></pre>"},{"location":"os-preparation/#disable-swap-permanently","title":"Disable swap permanently","text":"<p>Edit /etc/fstab and comment out any swap entry: <pre><code>sudo sed -i '/ swap / s/^/#/' /etc/fstab\n</code></pre></p>"},{"location":"os-preparation/#verify-swap-status","title":"Verify swap status","text":"<p><pre><code>free -h\n</code></pre> Expected output: Swap: 0B</p>"},{"location":"os-preparation/#load-required-kernel-modules","title":"Load required kernel modules","text":"<p>Kubernetes networking requires specific kernel modules.</p>"},{"location":"os-preparation/#configure-modules-to-load-at-boot","title":"Configure modules to load at boot","text":"<pre><code>sudo tee /etc/modules-load.d/k8s.conf &lt;&lt;EOF\noverlay\nbr_netfilter\nEOF\n</code></pre>"},{"location":"os-preparation/#load-modules-immediately","title":"Load modules immediately","text":"<pre><code>sudo modprobe overlay\nsudo modprobe br_netfilter\n</code></pre>"},{"location":"os-preparation/#verify-loaded-modules","title":"Verify loaded modules","text":""},{"location":"os-preparation/#lsmod-grep-e-overlaybr_netfilter","title":"<pre><code>lsmod | grep -E 'overlay|br_netfilter'\n</code></pre>","text":""},{"location":"os-preparation/#configure-kernel-parameters-sysctl","title":"Configure kernel parameters (sysctl)","text":"<p>Kubernetes requires proper packet forwarding and bridge traffic handling.</p>"},{"location":"os-preparation/#configure-sysctl-parameters","title":"Configure sysctl parameters","text":"<pre><code>sudo tee /etc/sysctl.d/k8s.conf &lt;&lt;EOF\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                = 1\nEOF\n</code></pre>"},{"location":"os-preparation/#apply-settings","title":"Apply settings","text":"<pre><code>sudo sysctl --system\n</code></pre>"},{"location":"os-preparation/#verify-settings","title":"Verify settings","text":"<p><pre><code>sysctl net.bridge.bridge-nf-call-iptables\nsysctl net.ipv4.ip_forward\n</code></pre> Expected value: 1</p>"},{"location":"os-preparation/#install-container-runtime-containerd","title":"Install container runtime (containerd)","text":"<p>Kubernetes requires a CRI-compatible container runtime. This lab uses containerd.</p>"},{"location":"os-preparation/#install-containerd","title":"Install containerd","text":"<pre><code>sudo apt-get update\nsudo apt-get install -y containerd\n</code></pre>"},{"location":"os-preparation/#configure-containerd","title":"Configure containerd","text":"<pre><code>sudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\n</code></pre>"},{"location":"os-preparation/#enable-systemd-cgroup-driver","title":"Enable systemd cgroup driver","text":"<p>Edit /etc/containerd/config.toml and ensure:</p> <p><pre><code>SystemdCgroup = true\n</code></pre> You can do it automatically:</p> <pre><code>sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml\n</code></pre>"},{"location":"os-preparation/#restart-and-enable-containerd","title":"Restart and enable containerd","text":"<pre><code>sudo systemctl restart containerd\nsudo systemctl enable containerd\n</code></pre>"},{"location":"os-preparation/#verify-containerd-status","title":"Verify containerd status","text":"<pre><code>systemctl status containerd\n</code></pre>"},{"location":"os-preparation/#verify-system-readiness","title":"Verify system readiness","text":"<p>Before moving forward, ensure the following: - swap is disabled - required kernel modules are loaded - sysctl parameters are applied - containerd is running</p> <p>This node is now ready for Kubernetes installation using kubeadm.</p>"},{"location":"os-preparation/#network-ranges","title":"Network ranges","text":"Network type CIDR Home LAN 192.168.1.0/24 Pod Network 10.244.0.0/16"},{"location":"os-preparation/#key-design-decisions","title":"Key design decisions","text":"<ul> <li>Wired Ethernet only for cluster nodes</li> <li>Static addressing for predictability</li> <li>Dedicated Pod CIDR to avoid routing conflicts</li> <li>Single control plane (home lab scope)</li> </ul> <p>This topology provides a simple, stable and production-like foundation for Kubernetes experimentation.</p>"}]}