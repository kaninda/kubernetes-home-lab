{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"hardware/","title":"Hardware","text":"<p>This section describes the physical hardware used to build the Kubernetes Home Lab.</p> <p>The goal is to use compact, power-efficient, and affordable machines while keeping a setup close to a real-world bare-metal Kubernetes cluster.</p>"},{"location":"hardware/#hardware-overview","title":"Hardware overview","text":"Node Role CPU RAM Storage Network cp-1 Control Plane Ryzen 5 3500U 16GB 512GB SSD 2.5 GbE worker-1 Worker Node Ryzen 5 5500U 32GB 500GB SSD 2.5 GbE worker-2 Worker Node Ryzen 5 5500U 32GB 500GB SSD 2.5 GbE"},{"location":"hardware/#control-plane-node","title":"Control Plane node","text":"<p>The control plane is hosted on a dedicated mini-PC.</p> <p>Characteristics: - Sufficient CPU power for API server, scheduler and controller manager - Moderate memory footprint (16 GB is sufficient for a single control plane) - SSD storage for etcd and system components - Dedicated Ethernet interface</p> <p>This node is intentionally not used for application workloads.</p>"},{"location":"hardware/#worker-nodes","title":"Worker nodes","text":"<p>Worker nodes are more powerful and designed to run application workloads.</p> <p>Characteristics: - Higher CPU core count for parallel workloads - More memory for pods and caches - Fast local SSD storage - Wired Ethernet connectivity</p> <p>This allows realistic scheduling, resource limits and scaling experiments.</p>"},{"location":"hardware/#networking-hardware","title":"Networking hardware","text":"<p>All nodes are connected using a dedicated 2.5 GbE Ethernet switch.</p> <p>Design choices: - Wired network only (no Wi-Fi) - Predictable latency and throughput - No network bottlenecks between nodes</p>"},{"location":"hardware/#key-hardware-design-decisions","title":"Key hardware design decisions","text":"<ul> <li>Single control plane (home lab scope)</li> <li>Dedicated nodes (no virtualization)</li> <li>Wired Ethernet only</li> <li>Over-provisioned worker nodes</li> <li>Energy-efficient hardware</li> </ul>"},{"location":"network-topology/","title":"Network Topology","text":"<p>This section describes the physical and logical network topology of the Kubernetes Home Lab.</p> <p>The goal is to clearly understand: - how nodes are connected at the network level - how Kubernetes components communicate - how Pod networking is handled</p>"},{"location":"network-topology/#high-level-overview","title":"High-level overview","text":"<p>The cluster is deployed on a home LAN with: - a router providing DHCP reservations - a dedicated 2.5 GbE switch - all Kubernetes nodes connected via Ethernet</p> <p>All nodes use static IPs or DHCP reservations to ensure predictable addressing.</p>"},{"location":"network-topology/#physical-network-topology","title":"Physical network topology","text":""},{"location":"network-topology/#_1","title":"Network Topology","text":""},{"location":"network-topology/#kubernetes-control-plane-communication","title":"Kubernetes control plane communication","text":"<ul> <li>The kube-apiserver runs on the control plane node</li> <li>Worker nodes communicate exclusively with the API server</li> <li>All control traffic uses the LAN network</li> </ul>"},{"location":"network-topology/#pod-network-calico","title":"Pod network (Calico)","text":"<p>The cluster uses Calico as the CNI. - Each node is assigned a Pod CIDR - Pods communicate directly across nodes - Pod traffic is encapsulated and routed by Calico - The Pod CIDR does not overlap with the LAN network</p> <p></p>"},{"location":"os-preparation/","title":"OS Preparation (Ubuntu Server)","text":"<p>This section describes all system-level prerequisites required before installing Kubernetes using kubeadm.</p> <p>The goal is to ensure:</p> <ul> <li>system stability</li> <li>Kubernetes compatibility</li> <li>predictable and reproducible behavior across all nodes</li> </ul> <p>All steps below must be applied on every node:</p> <ul> <li>control plane</li> <li>worker nodes</li> </ul>"},{"location":"os-preparation/#base-assumptions","title":"Base assumptions","text":"<ul> <li>OS: Ubuntu Server 22.04 LTS (or newer)</li> <li>Architecture: amd64</li> <li>Network: static IP or DHCP reservation</li> <li>User has sudo privileges</li> </ul>"},{"location":"os-preparation/#disable-swap","title":"Disable swap","text":"<p>Kubernetes requires swap to be disabled. The kubelet will refuse to start if swap is enabled.</p>"},{"location":"os-preparation/#disable-swap-immediately","title":"Disable swap immediately","text":"<pre><code>sudo swapoff -a\n</code></pre>"},{"location":"os-preparation/#disable-swap-permanently","title":"Disable swap permanently","text":"<p>Edit /etc/fstab and comment out any swap entry:</p> <pre><code>sudo sed -i '/ swap / s/^/#/' /etc/fstab\n</code></pre>"},{"location":"os-preparation/#verify-swap-status","title":"Verify swap status","text":"<pre><code>free -h\n</code></pre> <p>Expected output: Swap: 0B</p>"},{"location":"os-preparation/#load-required-kernel-modules","title":"Load required kernel modules","text":"<p>Kubernetes networking requires specific kernel modules.</p>"},{"location":"os-preparation/#configure-modules-to-load-at-boot","title":"Configure modules to load at boot","text":"<pre><code>sudo tee /etc/modules-load.d/k8s.conf &lt;&lt;EOF\noverlay\nbr_netfilter\nEOF\n</code></pre>"},{"location":"os-preparation/#load-modules-immediately","title":"Load modules immediately","text":"<pre><code>sudo modprobe overlay\nsudo modprobe br_netfilter\n</code></pre>"},{"location":"os-preparation/#verify-loaded-modules","title":"Verify loaded modules","text":"<pre><code>lsmod | grep -E 'overlay|br_netfilter'\n</code></pre>"},{"location":"os-preparation/#configure-kernel-parameters-sysctl","title":"Configure kernel parameters (sysctl)","text":"<p>Kubernetes requires proper packet forwarding and bridge traffic handling.</p>"},{"location":"os-preparation/#configure-sysctl-parameters","title":"Configure sysctl parameters","text":"<pre><code>sudo tee /etc/sysctl.d/k8s.conf &lt;&lt;EOF\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                = 1\nEOF\n</code></pre>"},{"location":"os-preparation/#apply-settings","title":"Apply settings","text":"<pre><code>sudo sysctl --system\n</code></pre>"},{"location":"os-preparation/#verify-settings","title":"Verify settings","text":"<pre><code>sysctl net.bridge.bridge-nf-call-iptables\nsysctl net.ipv4.ip_forward\n</code></pre> <p>Expected value: 1</p>"},{"location":"os-preparation/#install-container-runtime-containerd","title":"Install container runtime (containerd)","text":"<p>Kubernetes requires a CRI-compatible container runtime. This lab uses containerd.</p>"},{"location":"os-preparation/#install-containerd","title":"Install containerd","text":"<pre><code>sudo apt-get update\nsudo apt-get install -y containerd\n</code></pre>"},{"location":"os-preparation/#configure-containerd","title":"Configure containerd","text":"<pre><code>sudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\n</code></pre>"},{"location":"os-preparation/#enable-systemd-cgroup-driver","title":"Enable systemd cgroup driver","text":"<p>Edit /etc/containerd/config.toml and ensure:</p> <pre><code>SystemdCgroup = true\n</code></pre> <p>You can do it automatically:</p> <pre><code>sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml\n</code></pre>"},{"location":"os-preparation/#restart-and-enable-containerd","title":"Restart and enable containerd","text":"<pre><code>sudo systemctl restart containerd\nsudo systemctl enable containerd\n</code></pre>"},{"location":"os-preparation/#verify-containerd-status","title":"Verify containerd status","text":"<pre><code>systemctl status containerd\n</code></pre>"},{"location":"os-preparation/#verify-system-readiness","title":"Verify system readiness","text":"<p>Before moving forward, ensure the following: - swap is disabled - required kernel modules are loaded - sysctl parameters are applied - containerd is running</p> <p>This node is now ready for Kubernetes installation using kubeadm.</p>"},{"location":"os-preparation/#network-ranges","title":"Network ranges","text":"Network type CIDR Home LAN 192.168.1.0/24 Pod Network 10.244.0.0/16"},{"location":"os-preparation/#key-design-decisions","title":"Key design decisions","text":"<ul> <li>Wired Ethernet only for cluster nodes</li> <li>Static addressing for predictability</li> <li>Dedicated Pod CIDR to avoid routing conflicts</li> <li>Single control plane (home lab scope)</li> </ul> <p>This topology provides a simple, stable and production-like foundation for Kubernetes experimentation.</p>"},{"location":"overview/","title":"Overview","text":"<p>This documentation describes the design, setup, and operation of a bare-metal Kubernetes home lab.</p> <p>The cluster is built using kubeadm on Ubuntu Server, with a strong focus on: - clarity - reproducibility - production-like behavior</p> <p>While this is a home lab, all design choices aim to stay as close as possible to real-world Kubernetes environments.</p>"},{"location":"overview/#cluster-goals","title":"Cluster goals","text":"<p>The main goals of this Kubernetes Home Lab are:</p> <ul> <li>Learn Kubernetes fundamentals on bare metal</li> <li>Understand cluster internals and networking</li> <li>Practice installation, upgrades and troubleshooting</li> <li>Experiment with CNI, storage and GitOps tools</li> <li>Maintain a simple but realistic setup</li> </ul>"},{"location":"overview/#high-level-architecture","title":"High-level architecture","text":"<p>The cluster consists of: - one dedicated control plane node - multiple worker nodes - a flat Layer 2 home LAN - static IP addressing or DHCP reservations - a dedicated Pod network</p> <p>All nodes run: - Ubuntu Server - containerd as container runtime - kubeadm-managed Kubernetes components</p>"},{"location":"overview/#design-principles","title":"Design principles","text":"<p>This cluster follows a few key design principles:</p> <ul> <li>Simplicity over complexity</li> <li>Predictability over automation</li> <li>Reproducibility over convenience</li> <li>Documentation-first approach</li> </ul> <p>Each component is installed and configured explicitly to ensure full understanding of what happens under the hood.</p>"},{"location":"overview/#scope-and-limitations","title":"Scope and limitations","text":"<p>This home lab intentionally has the following limitations:</p> <ul> <li>Single control plane (no HA)</li> <li>No external load balancer</li> <li>No cloud provider integration</li> <li>No managed services</li> </ul> <p>These limitations keep the cluster easy to reason about while still allowing meaningful Kubernetes experimentation.</p>"},{"location":"overview/#documentation-structure","title":"Documentation structure","text":"<p>The documentation is organized as follows:</p> <ol> <li>Hardware description reminds the physical foundation</li> <li>Network topology explains physical and logical connectivity</li> <li>OS preparation ensures all nodes are Kubernetes-ready</li> <li>Kubernetes installation describes kubeadm setup</li> <li>CNI configuration focuses on pod networking</li> <li>Validation ensures cluster health and correctness</li> </ol> <p>Each section builds on the previous one and should be followed in order.</p>"}]}