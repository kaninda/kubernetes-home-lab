{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"os-preparation/","title":"OS Preparation (Ubuntu Server)","text":"<p>This section describes all system-level prerequisites required before installing Kubernetes using kubeadm.</p> <p>The goal is to ensure:</p> <ul> <li>system stability</li> <li>Kubernetes compatibility</li> <li>predictable and reproducible behavior across all nodes</li> </ul> <p>All steps below must be applied on every node:</p> <ul> <li>control plane</li> <li>worker nodes</li> </ul>"},{"location":"os-preparation/#base-assumptions","title":"Base assumptions","text":"<ul> <li>OS: Ubuntu Server 22.04 LTS (or newer)</li> <li>Architecture: amd64</li> <li>Network: static IP or DHCP reservation</li> <li>User has sudo privileges</li> </ul>"},{"location":"os-preparation/#disable-swap","title":"Disable swap","text":"<p>Kubernetes requires swap to be disabled. The kubelet will refuse to start if swap is enabled.</p>"},{"location":"os-preparation/#disable-swap-immediately","title":"Disable swap immediately","text":"<pre><code>sudo swapoff -a\n</code></pre>"},{"location":"os-preparation/#disable-swap-permanently","title":"Disable swap permanently","text":"<p>Edit /etc/fstab and comment out any swap entry: <pre><code>sudo sed -i '/ swap / s/^/#/' /etc/fstab\n</code></pre></p>"},{"location":"os-preparation/#verify-swap-status","title":"Verify swap status","text":"<p><pre><code>free -h\n</code></pre> Expected output: Swap: 0B</p>"},{"location":"os-preparation/#load-required-kernel-modules","title":"Load required kernel modules","text":"<p>Kubernetes networking requires specific kernel modules.</p>"},{"location":"os-preparation/#configure-modules-to-load-at-boot","title":"Configure modules to load at boot","text":"<pre><code>sudo tee /etc/modules-load.d/k8s.conf &lt;&lt;EOF\noverlay\nbr_netfilter\nEOF\n</code></pre>"},{"location":"os-preparation/#load-modules-immediately","title":"Load modules immediately","text":"<pre><code>sudo modprobe overlay\nsudo modprobe br_netfilter\n</code></pre>"},{"location":"os-preparation/#verify-loaded-modules","title":"Verify loaded modules","text":""},{"location":"os-preparation/#lsmod-grep-e-overlaybr_netfilter","title":"<pre><code>lsmod | grep -E 'overlay|br_netfilter'\n</code></pre>","text":""},{"location":"os-preparation/#configure-kernel-parameters-sysctl","title":"Configure kernel parameters (sysctl)","text":"<p>Kubernetes requires proper packet forwarding and bridge traffic handling.</p>"},{"location":"os-preparation/#configure-sysctl-parameters","title":"Configure sysctl parameters","text":"<pre><code>sudo tee /etc/sysctl.d/k8s.conf &lt;&lt;EOF\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                = 1\nEOF\n</code></pre>"},{"location":"os-preparation/#apply-settings","title":"Apply settings","text":"<pre><code>sudo sysctl --system\n</code></pre>"},{"location":"os-preparation/#verify-settings","title":"Verify settings","text":"<p><pre><code>sysctl net.bridge.bridge-nf-call-iptables\nsysctl net.ipv4.ip_forward\n</code></pre> Expected value: 1</p>"},{"location":"os-preparation/#install-container-runtime-containerd","title":"Install container runtime (containerd)","text":"<p>Kubernetes requires a CRI-compatible container runtime. This lab uses containerd.</p>"},{"location":"os-preparation/#install-containerd","title":"Install containerd","text":"<pre><code>sudo apt-get update\nsudo apt-get install -y containerd\n</code></pre>"},{"location":"os-preparation/#configure-containerd","title":"Configure containerd","text":"<pre><code>sudo mkdir -p /etc/containerd\ncontainerd config default | sudo tee /etc/containerd/config.toml\n</code></pre>"},{"location":"os-preparation/#enable-systemd-cgroup-driver","title":"Enable systemd cgroup driver","text":"<p>Edit /etc/containerd/config.toml and ensure:</p> <p><pre><code>SystemdCgroup = true\n</code></pre> You can do it automatically:</p> <pre><code>sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml\n</code></pre>"},{"location":"os-preparation/#restart-and-enable-containerd","title":"Restart and enable containerd","text":"<pre><code>sudo systemctl restart containerd\nsudo systemctl enable containerd\n</code></pre>"},{"location":"os-preparation/#verify-containerd-status","title":"Verify containerd status","text":"<pre><code>systemctl status containerd\n</code></pre>"},{"location":"os-preparation/#verify-system-readiness","title":"Verify system readiness","text":"<p>Before moving forward, ensure the following: - swap is disabled - required kernel modules are loaded - sysctl parameters are applied - containerd is running</p> <p>This node is now ready for Kubernetes installation using kubeadm.</p>"}]}